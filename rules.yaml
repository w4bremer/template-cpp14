features:
  api:
    module:
      documents:
        - source: "module/CMakeLists.txt.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/CMakeLists.txt"
        - source: "module/ModuleConfig.cmake.in.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/{{module.name|identifier|capitalize}}Config.cmake.in"
        - source: "module/generated/api/CMakeLists.txt.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/api/CMakeLists.txt"
        - source: "module/generated/api/module.h.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/api/{{module.name|identifier}}.h"
        - source: "module/generated/api/module_common.h.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/api/common.h"
        - source: "module/generated/api/datastructs.api.h.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/api/datastructs.api.h"
        - source: "module/generated/api/datastructs.api.cpp.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/api/datastructs.api.cpp"
    interface:
      documents:
        - source: "module/generated/api/interface.api.h.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/api/{{interface.name|lower}}.api.h"
  core:
    module:
      documents:
        - source: "module/generated/core/CMakeLists.txt.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/core/CMakeLists.txt"
        - source: "module/generated/core/main_test.cpp"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/core/{{module.name|identifier}}.test.cpp"
        - source: "module/generated/core/json.adapter.h.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/core/{{module.name|identifier}}.json.adapter.h"
        - source: "module/generated/core/json.adapter.cpp.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/core/{{module.name|identifier}}.json.adapter.cpp"
    interface:
      documents:
        - source: "module/generated/core/interface.data.h.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/core/{{interface.name|lower}}.data.h"
        - source: "module/generated/core/interface.publisher.h.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/core/{{interface.name|lower}}.publisher.h"
        - source: "module/generated/core/interface.publisher.cpp.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/core/{{interface.name|lower}}.publisher.cpp"
  scaffold:
    module:
      documents:
        - source: "README.md"
          raw: true
        - source: CMakeLists.txt.liquid
          target: CMakeLists.txt
          overwrite: false
        - source: "module/source/CMakeLists.txt.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/implementation/CMakeLists.txt"
          overwrite: false
    interface:
      documents:
        - source: "module/source/implementation.h.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/implementation/{{interface.name|lower}}.h"
          overwrite: false
        - source: "module/source/implementation.cpp.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/implementation/{{interface.name|lower}}.cpp"
          overwrite: false
        - source: "module/source/implementation_test.cpp.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/implementation/{{interface.name|lower}}.test.cpp"
          overwrite: false
  monitor:
    module:
      documents:
        - source: "module/generated/monitor/CMakeLists.txt.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/monitor/CMakeLists.txt"
    interface:
      documents:
        - source: "module/generated/monitor/interface.tracedecorator.h.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/monitor/{{interface.name|lower}}.tracedecorator.h"
        - source: "module/generated/monitor/interface.tracedecorator.cpp.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/monitor/{{interface.name|lower}}.tracedecorator.cpp"
        - source: "module/generated/monitor/interface.tracer.h.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/monitor/{{interface.name|lower}}.tracer.h"
        - source: "module/generated/monitor/interface.tracer.cpp.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/monitor/{{interface.name|lower}}.tracer.cpp"
  olink:
    system:
        documents:
        - source: "Lifecycle for olink client-server implementation.md"
          raw: true
    interface:
      documents:
        - source: "module/generated/olink/CMakeLists.txt.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/olink/CMakeLists.txt"
        - source: "module/generated/olink/interfaceservice.h.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/olink/{{interface.name|lower}}service.h"
        - source: "module/generated/olink/interfaceservice.cpp.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/olink/{{interface.name|lower}}service.cpp"
        - source: "module/generated/olink/interfaceclient.h.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/olink/{{interface.name|lower}}client.h"
        - source: "module/generated/olink/interfaceclient.cpp.liquid"
          target: "modules/{{module.name|identifier}}_module/{{module.name|identifier}}/generated/olink/{{interface.name|lower}}client.cpp"
  apigear:
    # when:
      # - monitor
      # - olink
    system:
      documents:
        - source: "apigear/apigear.test.cpp"
          raw: true
        - source: "apigear/tracer/tracer.h"
          raw: true
        - source: "apigear/tracer/tracer.cpp"
          raw: true
        - source: "apigear/tracer/tracer.test.cpp"
          raw: true
        - source: "apigear/tracer/CMakeLists.txt"
          raw: true
        - source: "apigear/CMakeLists.txt"
          raw: true
        - source: "apigear/ApigearConfig.cmake.in"
          raw: true
        - source: "apigear/conanfile.py"
          raw: true
        - source: "apigear/olink/CMakeLists.txt"
          raw: true
        - source: "apigear/olink/olinkhost.cpp"
          raw: true
        - source: "apigear/olink/olinkhost.h"
          raw: true
        - source: "apigear/olink/olinkconnection.cpp"
          raw: true
        - source: "apigear/olink/olinkconnection.h"
          raw: true
        - source: "apigear/olink/iolinkconnector.h"
          raw: true
        - source: "apigear/olink/private/apigear_olink.hpp"
          raw: true
        - source: "apigear/olink/private/olinkremote.cpp"
          raw: true
        - source: "apigear/olink/private/olinkremote.h"
          raw: true
        - source: "apigear/olink/private/olinkwebsockethandler.cpp"
          raw: true
        - source: "apigear/olink/private/olinkwebsockethandler.h"
          raw: true
        - source: "apigear/olink/private/requesthandlerfactory.cpp"
          raw: true
        - source: "apigear/olink/private/requesthandlerfactory.h"
          raw: true
        - source: "apigear/olink/private/iconnectionstorage.h"
          raw: true
        - source: "apigear/olink/private/connectionstorage.cpp"
          raw: true
        - source: "apigear/olink/private/connectionstorage.h"
          raw: true
        - source: "apigear/olink/logger/logger.cpp"
          raw: true
        - source: "apigear/olink/logger/logger.h"
          raw: true
        - source: "apigear/olink/tests/CMakeLists.txt"
          raw: true
        - source: "apigear/olink/tests/olink_connection.test.cpp"
          raw: true
        - source: "apigear/olink/tests/olinkhost.test.cpp"
          raw: true
        - source: "apigear/olink/tests/test_main.cpp"
          raw: true
        - source: "apigear/olink/tests/private/frame.hpp"
          raw: true
        - source: "apigear/olink/tests/private/sinkobjectmock.hpp"
          raw: true
        - source: "apigear/olink/tests/private/sourceobjectmock.hpp"
          raw: true
        - source: "apigear/olink/tests/private/test_server/test_server.hpp"
          raw: true
        - source: "apigear/olink/tests/private/test_server/test_server_request_factory.hpp"
          raw: true
        - source: "apigear/olink/tests/private/test_server/iframestorage.hpp"
          raw: true
        - source: "apigear/olink/tests/private/test_server/test_server_request_handler.hpp"
          raw: true
  examples:
    system:
      documents:
        - source: examples/app/CMakeLists.txt.liquid
          target: examples/app/CMakeLists.txt
        - source: examples/app/conanfile.txt.liquid
          target: examples/app/conanfile.txt
        - source: examples/app/main.cpp.liquid
          target: examples/app/main.cpp
        - source: examples/olinkserver/CMakeLists.txt.liquid
          target: examples/olinkserver/CMakeLists.txt
        - source: examples/olinkserver/conanfile.txt.liquid
          target: examples/olinkserver/conanfile.txt
        - source: examples/olinkserver/main.cpp.liquid
          target: examples/olinkserver/main.cpp
        - source: examples/olinkclient/CMakeLists.txt.liquid
          target: examples/olinkclient/CMakeLists.txt
        - source: examples/olinkclient/conanfile.txt.liquid
          target: examples/olinkclient/conanfile.txt
        - source: examples/olinkclient/main.cpp.liquid
          target: examples/olinkclient/main.cpp
  conan:
    system:
      documents:
        - source: test_conan.sh
          overwrite: false
        - source: test_conan.bat
          overwrite: false
    module:
      documents:
        - source: module/conanfile.py.liquid
          target: "modules//{{module.name|identifier}}_module//conanfile.py"
          overwrite: false
        - source: module/test_package/CMakeLists.txt.liquid
          target: "modules//{{module.name|identifier}}_module//test_package/CMakeLists.txt"
          overwrite: false
        - source: module/test_package/conanfile.py.liquid
          target: "modules/{{module.name|identifier}}_module//test_package/conanfile.py"
          overwrite: false
        - source: module/test_package/main.cpp.liquid
          target: "modules//{{module.name|identifier}}_module//test_package/main.cpp"
          overwrite: false
